线程池原理：首先线程池对线程的创建和销毁是统一的，集中在服务器的启动和结束阶段，或者其他空闲阶段。然后线程池能显著减少线程的创建，并且线程池中线程的数量是固定的。这样可以增加处理器的工作效率。

当有线程处于空闲状态，线程池会将另一个辅助线程插入进来，以保证处理器持续在工作状态。还有一种情况是当线程池中的线程都保持繁忙状态，不过有线程挂起，在一段时间后，线程池同样会创建一个辅助线程插入，但是线程数目不会超过线程池的最大上限，超过最大上限的线程可以排队，但它们要等到其他线程完成后再启动。

线程池的组成共分为三部分：
- 任务队列，存储需要处理的工作，由工作的线程来处理这些任务
1. 通过线程池提供的API函数，来添加代处理的任务到任务队列中，或删除一个已经处理的任务。
2. 任务队列会删除已完成的任务。
3. 任务队列是线程池的使用者，也就是线程池往任务队列中调用的线程，就是生产者线程。
- 工作线程（任务队列中任务的消费者）N个
1. 工作线程会从任务队列中取任务然后进行处理。
2. 若任务队列为空，工作线程会阻塞（条件变量或信号量）。
3. 若任务队列有了新的任务，由生产者线程将阻塞解除，然后工作线程取任务继续工作。
- 管理者线程（不处理任务队列中任务的任务）1个
1. 管理者线程是周期性的对任务队列及处于工作中的工作线程的数量进行检测。
2. 当任务过多时，则会适当的创建一些工作线程。
3. 当任务过少时，则会适当的减少一些工作线程。